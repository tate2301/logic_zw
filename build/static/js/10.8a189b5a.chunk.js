(this.webpackJsonpfront=this.webpackJsonpfront||[]).push([[10],{973:function(e,t,a){"use strict";a.r(t);var n=a(117),l=a.n(n),s=a(134),i=a(19),o=a(63),r=a(64),c=a(66),d=a(65),u=a(0),m=a.n(u),h=a(437),p=a(435),g=a(201),b=a(958),E=a(131),f=a(444),S=a(443),y=a(972),x=a(209),j=a(431),w=a(974),v=a(975),I=a(433),k=a(565),O=a.n(k),_=a(57),T=a.n(_),C=a(651),M=a(989),N=a(985),L=a(653),F=M.a.Step,R=function(e){Object(c.a)(a,e);var t=Object(d.a)(a);function a(e){var n;return Object(o.a)(this,a),(n=t.call(this,e))._onFileChange=function(e){var t=e.map((function(e){return e.file}));n.setState(Object(i.a)({},n.state,{currenSubmission:t}))},n.join=function(){n.setState(Object(i.a)({},n.state,{joinLoading:!0})),T.a.get("/api/challenges/".concat(n.state.challenge._id,"/join")).then((function(e){e.data.error?(f.a.warning("We could not register you. Reason: "+e.data.message),n.setState(Object(i.a)({},n.state,{joinLoading:!1}))):(f.a.success(e.data.message),n.setState(Object(i.a)({},n.state,{joinLoading:!1})),document.location.reload())})).catch((function(e){f.a.danger("We are having problems registering you. Please try again"),console.log(e),n.setState(Object(i.a)({},n.state,{joinLoading:!1}))}))},n.state={currenSubmission:"",submissionsTableArray:[],selectedIndex:0,joinModalShown:!1,submitModalShown:!1,joinLoading:!1,joined:!1,registered:!1,mySubmission:{position:"",points:"",reward:"",submission:""},challenge:{_id:n.props.match.params._id,sponsored:!0,title:"",tagline:"",prize_money:"",registered:[],submissions:[],deadline:new Date,description:"{}",evaluation:"{}",rules:"{}"}},n}return Object(r.a)(a,[{key:"componentDidMount",value:function(){var e=this;T.a.get("/api/challenges/".concat(this.state.challenge._id)).then(function(){var t=Object(s.a)(l.a.mark((function t(a){var n,s,o,r;return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!a.data.error){t.next=4;break}f.a.warning(a.data.message),t.next=18;break;case 4:return n={},s="",o="",r=[],console.log(JSON.parse(a.data.doc.description)),t.next=11,a.data.doc.registered.map((function(e){return e._id===JSON.parse(localStorage.getItem("user")).profile&&(s=!0)}));case 11:return t.next=13,a.data.doc.submissions.map((function(e){if(e.profile._id===JSON.parse(localStorage.getItem("user")).profile){var t={first_name:e.profile.first_names,last_name:e.profile.last_name,points:e.points,reward:"$"+e.reward,submissionTime:e.submissionTime};return r.push(t),Object.assign(n,e),o=!0}return!1}));case 13:return t.next=15,e.setState(Object(i.a)({},e.state,{submissionsTableArray:r}));case 15:return e.interval=setInterval((function(){var t=O.a.utc(a.data.doc.deadline),n=O.a.utc(),l=O()(t-n),s=l.format("D"),o=l.format("HH"),r=l.format("mm"),c=l.format("ss");e.setState(Object(i.a)({},e.state,{days:s,hours:o,minutes:r,seconds:c}))}),1e3),t.next=18,e.setState(Object(i.a)({},e.state,{joined:s,submitted:o,mySubmission:n,challenge:a.data.doc}));case 18:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()).catch((function(e){f.a.danger("Error occured while retrieving challenge details.")}))}},{key:"render",value:function(){var e=this,t=this.state.challenge,a=this.state.days-1+(this.state.hours-2),n=this.state.minutes,l=this.state.seconds,s=O()().diff(O()(t.deadline||O()())),o="",r="",c="";try{c=Object(b.a)(Object(E.convertFromRaw)(JSON.parse(t.rules)))}catch(d){}try{r=Object(b.a)(Object(E.convertFromRaw)(JSON.parse(t.evaluation)))}catch(u){}try{o=Object(b.a)(Object(E.convertFromRaw)(JSON.parse(t.description)))}catch(f){}return console.log({rulesHTML:c,evaluationHTML:r,descriptionHTML:o}),m.a.createElement(h.a,null,m.a.createElement(L.a,null,m.a.createElement("title",null,t.title," | Logic powered by Colar"),m.a.createElement("meta",{name:"description",content:t.tagline})),m.a.createElement(p.a,{className:"challenge-header"},m.a.createElement(g.a,null,m.a.createElement(p.a,null,m.a.createElement(g.a,null,m.a.createElement("p",null,t.sponsored?"Sponsored Challenge":null))),m.a.createElement(p.a,null,m.a.createElement(g.a,{lg:10,sm:10},m.a.createElement("h4",null,t.title),m.a.createElement("p",null,t.tagline)),m.a.createElement(g.a,{lg:2,sm:2},m.a.createElement("h4",null,"$",t.prize_money),m.a.createElement("p",null,"PRIZE MONEY"))),m.a.createElement("hr",null),m.a.createElement(p.a,null,m.a.createElement(g.a,{xl:2,lg:3,md:3,xs:6},t.registered.length," joined"),m.a.createElement(g.a,{xl:2,lg:3,md:3,xs:6},t.submissions.length," submitted"),m.a.createElement(g.a,{xl:2,lg:3,md:3,xs:12},O()(t.deadline).fromNow()),m.a.createElement(g.a,{className:"d-flex align-items-end",xl:{span:2,offset:4},lg:3,xs:12},m.a.createElement(S.a,{title:"Submit your solution",isShown:this.state.submitModalShown,shouldCloseOnOverlayClick:!1,onConfirm:this._submitFile,onCancel:function(){return e.setState(Object(i.a)({},e.state,{submitModalShown:!1}))}},m.a.createElement("h5",null,"Drag and drop your submission file below"),m.a.createElement("p",{className:"sub"},"File should of type stated in description of challenge otherwise you wont be graded."),m.a.createElement("form",{onSubmit:this._submitFile},m.a.createElement(p.a,null,m.a.createElement(g.a,null,m.a.createElement(C.FilePond,{onupdatefiles:function(t){return e._onFileChange(t)},allowMultiple:!1,maxFiles:1,name:"submission",onprocessfile:function(){return document.location.reload()},server:{url:"/api",process:{url:"/challenges/".concat(this.state.challenge._id,"/submit"),method:"POST",withCredentials:!0,headers:{},timeout:7e3,onload:null,onerror:null}},instantUpload:!0}))))),m.a.createElement(S.a,{title:"Conditions of Logic Challenges",isShown:this.state.joinModalShown,onCancel:function(){return e.setState(Object(i.a)({},e.state,{joinModalShown:!1}))},onConfirm:function(){e.join(),console.log(e.state.joined),e.setState(Object(i.a)({},e.state,{joinLoading:!0,joinModalShown:!1}))}},m.a.createElement("p",null,"Your submission code remains yours which means that you retain any intellectual property rights that you have in your code or submission for example you have intellectual property rights in the creative content that you make such as code. You have no right to share someone else's creative content or code even with their permission.",m.a.createElement("br",null),"We need your permission if your intellectual property rights restrict our use of your content. You provide Team Guava with that permission through this licence."),m.a.createElement("p",null,"Sharing of solutions to challenges is prohibited and will result in disqualification"),m.a.createElement(y.a,null,"NB: The code you submit will be published.")),this.state.joined?this.state.submitted?m.a.createElement(x.a,{disabled:!0},"Already Submitted"):m.a.createElement(x.a,{intent:"success",onClick:function(){return e.setState(Object(i.a)({},e.state,{submitModalShown:!0}))},appearance:"primary"},"Submit Solution"):m.a.createElement(x.a,{isLoading:this.state.joinLoading,onClick:function(){return e.setState(Object(i.a)({},e.state,{joinModalShown:!0}))},appearance:"primary"},"Join Challenge"))),m.a.createElement("hr",null),m.a.createElement(p.a,null,m.a.createElement(g.a,null,m.a.createElement(M.a,{style:{fontSize:"14px !important"},className:"text-small",current:a+ +s>0?3:t.closed?3:t.started?1:-1},m.a.createElement(F,{className:"text-small",title:"Starts\ud83d\ude80",description:O()(t.deadline).fromNow()}),m.a.createElement(F,{title:"In Progress\ud83d\udc69\ud83c\udffe\u200d\ud83d\udcbb",description:this.state.challenge.started?"Preparations":t.closed?"Challenge closed":"Left ".concat(this.state.days-1,":").concat(this.state.hours-2||0,":").concat(n||0,":").concat(l||0)}),m.a.createElement(F,{title:"Submissions Close\ud83e\udd11",description:"".concat(O()(t.deadline).format("hh:mm a"))})))))),m.a.createElement(p.a,{className:"challenge-tabs"},m.a.createElement(g.a,null,m.a.createElement(j.a,{height:120},m.a.createElement(w.a,{marginBottom:16,flexBasis:240,marginRight:24},m.a.createElement(v.a,{key:0,id:0,onSelect:function(){return e.setState({selectedIndex:0})},isSelected:0===this.state.selectedIndex,"aria-controls":"panel-".concat(0)},"Description"),m.a.createElement(v.a,{key:1,id:1,onSelect:function(){return e.setState({selectedIndex:1})},isSelected:1===this.state.selectedIndex,"aria-controls":"panel-".concat(1)},"Evaluation"),m.a.createElement(v.a,{key:2,id:2,onSelect:function(){return e.setState({selectedIndex:2})},isSelected:2===this.state.selectedIndex,"aria-controls":"panel-".concat(2)},"Rules"),m.a.createElement(v.a,{key:3,id:3,onSelect:function(){return e.setState({selectedIndex:3})},isSelected:3===this.state.selectedIndex,"aria-controls":"panel-".concat(3)},"Registered"),m.a.createElement(v.a,{key:4,id:4,onSelect:function(){return e.setState({selectedIndex:4})},isSelected:4===this.state.selectedIndex,"aria-controls":"panel-".concat(4)},"Submissions")),m.a.createElement(j.a,{padding:16,background:"tint1",flex:"1"},m.a.createElement(j.a,{key:0,id:"panel-".concat(0),role:"tabpanel","aria-hidden":0!==this.state.selectedIndex,display:0===this.state.selectedIndex?"block":"none"},m.a.createElement(I.a,null,"{}"===this.state.challenge.description?m.a.createElement("p",null,"The author did not provide a description"):m.a.createElement("div",{dangerouslySetInnerHTML:{__html:o}}))),m.a.createElement(j.a,{key:1,id:"panel-".concat(1),role:"tabpanel","aria-hidden":1!==this.state.selectedIndex,display:1===this.state.selectedIndex?"block":"none"},m.a.createElement(I.a,null,"{}"===this.state.challenge.evaluation?m.a.createElement("p",null,"The author did not provide an evaluation metric"):m.a.createElement("div",{dangerouslySetInnerHTML:{__html:r}}))),m.a.createElement(j.a,{key:2,id:"panel-".concat(2),role:"tabpanel","aria-hidden":2!==this.state.selectedIndex,display:2===this.state.selectedIndex?"block":"none"},m.a.createElement(I.a,null,"{}"===this.state.challenge.rules?m.a.createElement("p",null,"The author did not provide information about the rules"):m.a.createElement("div",{dangerouslySetInnerHTML:{__html:c}}))),m.a.createElement(j.a,{key:3,id:"panel-".concat(3),role:"tabpanel","aria-hidden":3!==this.state.selectedIndex,display:3===this.state.selectedIndex?"block":"none"},m.a.createElement("h5",null,"Registered"),m.a.createElement("p",null,"This section shows people who have joined the challenge only."),m.a.createElement(N.a,{pagination:{pageSize:20},dataSource:this.state.challenge.registered,columns:[{title:"Name",dataIndex:"first_names",key:"first_name"},{title:"Surname",dataIndex:"last_name",key:"surname"},{title:"Total Points",dataIndex:"total_points",key:"total_points"}]})),m.a.createElement(j.a,{key:4,id:"panel-".concat(4),role:"tabpanel","aria-hidden":4!==this.state.selectedIndex,display:4===this.state.selectedIndex?"block":"none"},m.a.createElement(p.a,null,m.a.createElement(g.a,null,m.a.createElement("h5",null,"Submissions"),m.a.createElement("p",null,"This section shows people who have submitted a solution to the challenge"),m.a.createElement(N.a,{pagination:{pageSize:20},dataSource:this.state.submissionsTableArray,columns:[{title:"Name",dataIndex:"first_name",key:"first_name"},{title:"Surname",dataIndex:"last_name",key:"surname"},{title:"Points",dataIndex:"points",key:"points"},{title:"Submission Time",dataIndex:"submissionTime",key:"submission_time"},{title:"Reward",dataIndex:"reward",key:"reward"}]})))))))))}}]),a}(u.Component);t.default=R}}]);